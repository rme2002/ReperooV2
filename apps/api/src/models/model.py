# generated by datamodel-codegen:
#   filename:  api.yaml
#   timestamp: 2026-01-04T18:36:15+00:00

from __future__ import annotations

from enum import Enum
from typing import Optional, Union

from pydantic import (
    AwareDatetime,
    BaseModel,
    EmailStr,
    Field,
    RootModel,
    SecretStr,
    constr,
)


class UID(RootModel[str]):
    root: str = Field(..., examples=['12345abcde'])


class Email(RootModel[EmailStr]):
    root: EmailStr = Field(..., examples=['example@starter.com'])


class Password(RootModel[SecretStr]):
    root: SecretStr = Field(..., examples=['1234567@'])


class User(BaseModel):
    id: UID
    email: Email


class SignUpEmailPasswordPayload(BaseModel):
    email: Email
    password: Password


class SignUpEmailPasswordResponse(BaseModel):
    id: UID
    email: Email


class TransactionType(Enum):
    expense = 'expense'
    income = 'income'


class TransactionAmount(
    RootModel[constr(pattern=r'^(?:0\.[0-9]{1,2}|[1-9][0-9]*\.[0-9]{2})$')]
):
    root: constr(pattern=r'^(?:0\.[0-9]{1,2}|[1-9][0-9]*\.[0-9]{2})$') = Field(
        ...,
        description='Positive decimal amount with 2 decimal places',
        examples=['42.50'],
    )


class TransactionBase(BaseModel):
    user_id: UID
    occurred_at: AwareDatetime = Field(..., examples=['2024-06-01T13:45:00Z'])
    amount: TransactionAmount
    type: TransactionType
    expense_category_id: Optional[str] = Field(None, examples=['personal'])
    expense_subcategory_id: Optional[str] = Field(None, examples=['beauty_care'])
    income_category_id: Optional[str] = Field(None, examples=[None])
    notes: Optional[str] = Field(None, examples=['makeup'])
    transaction_tag: Optional[str] = Field(None, examples=['want'])


class Type(Enum):
    expense = 'expense'


class CreateExpenseTransactionPayload(TransactionBase):
    type: Type
    expense_category_id: str
    transaction_tag: str


class Type1(Enum):
    income = 'income'


class CreateIncomeTransactionPayload(TransactionBase):
    type: Type1
    income_category_id: str


class CreateTransactionPayload(
    RootModel[Union[CreateExpenseTransactionPayload, CreateIncomeTransactionPayload]]
):
    root: Union[CreateExpenseTransactionPayload, CreateIncomeTransactionPayload]


class Transaction(BaseModel):
    id: UID
    user_id: UID
    occurred_at: AwareDatetime = Field(..., examples=['2024-06-01T13:45:00Z'])
    created_at: AwareDatetime = Field(..., examples=['2024-06-01T13:45:00Z'])
    amount: TransactionAmount
    type: TransactionType
    expense_category_id: Optional[str] = Field(None, examples=['personal'])
    expense_subcategory_id: Optional[str] = Field(None, examples=['beauty_care'])
    income_category_id: Optional[str] = Field(None, examples=[None])
    notes: Optional[str] = Field(None, examples=['makeup'])
    transaction_tag: Optional[str] = Field(None, examples=['want'])


class GenericSuccess(BaseModel):
    status: int
    message: str = Field(..., examples=['Ok'])


class GenericError(BaseModel):
    status: int
    error: str = Field(..., examples=['INVALID_INPUT'])
    message: str = Field(..., examples=['Some error'])
